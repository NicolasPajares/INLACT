<!DOCTYPE html>
<html lang="es"></html>

<head>
    <meta charset="UTF-8">
    <title>INLACT</title>
    <meta name="description" content="INLACT.VM">
    <link rel="stylesheet" href="https://cdnjs"
</head>

<body>
    <header>
    <h1><figure><img src="img/logo.jpg" alt="">
    </figure></h1>
    <h2>NICOLÁS PAJARES</h2>
    <p><a href="clientes.html">CLIENTES</a> &nbsp; 
    <P><A href="ensayos.html">ENSAYOS</A> &nbsp; </P> 
    <P><A href="precios.html">PRECIOS</A> &nbsp;</P>
    <P><A href="stock.html">STOCK</A></p></P> 
    </header>
    
<h2>Visitas cercanas</h2>

<div id="zona-visitas">
  <p>Buscando fábricas cercanas...</p>
</div>
 
<script>
const lugares = [
  {
    nombre: "Fábrica Láctea A",
    lat: -32.4225,
    lng: -63.2451,
    radio: 200
  },
  {
    nombre: "Fábrica Láctea B",
    lat: -32.4302,
    lng: -63.2503,
    radio: 200
  }
];

function distanciaMetros(lat1, lon1, lat2, lon2) {
  const R = 6371000;
  const toRad = x => x * Math.PI / 180;

  const dLat = toRad(lat2 - lat1);
  const dLon = toRad(lon2 - lon1);

  const a =
    Math.sin(dLat / 2) ** 2 +
    Math.cos(toRad(lat1)) *
    Math.cos(toRad(lat2)) *
    Math.sin(dLon / 2) ** 2;

  return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
}

function buscarFabricaCercana() {
  navigator.geolocation.getCurrentPosition(
    (pos) => {
      const latActual = pos.coords.latitude;
      const lngActual = pos.coords.longitude;
      const contenedor = document.getElementById("zona-visitas");

      contenedor.innerHTML = "";

      let encontrada = false;

      lugares.forEach(lugar => {
        const d = distanciaMetros(
          latActual,
          lngActual,
          lugar.lat,
          lugar.lng
        );

        if (d <= lugar.radio) {
          encontrada = true;

          const btn = document.createElement("button");
          btn.textContent = "Registrar visita – " + lugar.nombre;

          btn.onclick = () => {
            alert("✅ Visita registrada en " + lugar.nombre);
          };

          contenedor.appendChild(btn);
          contenedor.appendChild(document.createElement("br"));
          contenedor.appendChild(document.createElement("br"));
        }
      });

      if (!encontrada) {
        contenedor.innerHTML =
          "<p>No hay fábricas dentro del radio.</p>";
      }
    },
    () => {
      document.getElementById("zona-visitas").innerHTML =
        "<p>No se pudo obtener la ubicación.</p>";
    }
  );
}

// Buscar al cargar la página
buscarFabricaCercana();
<script src="app.js"></script>
</script>
  <footer>
    <p>© INLACT - <a href="aviso-legal.html">Aviso Legal</a></p>
  </footer>


    
</body
